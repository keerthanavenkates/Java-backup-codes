package testngAPI;

import static io.restassured.RestAssured.given;

import org.data.PetDetails;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;

public class Other {
	
	
	
	public static void main(String[] args){
	RestAssured.baseURI = "https://petstore.swagger.io/v2"; 

	 String postResponse= given().log().all().header("Content-Type","application/json").body(PetDetails.petData(218, "Tiny","available"))	
	.when().post("/pet")
	.then().assertThat().statusCode(200).extract().response().asString();
	
	 System.out.println("response :"+postResponse);

	 JsonPath j = new JsonPath(postResponse);
	 int  petid = j.get("id");
	  System.out.println("pet ID:" +petid);
	}
	
	@Test(priority = 2)
	public void getPet(){
	given().log().all().header("Content-Type","application/json").pathParam("id", petid)
	.when().get("/pet/{id}")
	.then().log().all().assertThat().statusCode(200);
	}	
	@Test(priority = 3)
	public void updatePet(){
	given().log().all().header("Content-Type","application/json").body(PetDetails.petData(218, "Tiny", "sold"))
	.when().put("/pet")
	.then().log().all().assertThat().statusCode(200);
	
	}
	@Test(priority = 4)
	public void FindPet(){
	given().log().all().header("Content-Type","application/json").queryParam("status", "sold")
	.when().get("/pet/findByStatus")
	.then().log().all().assertThat().statusCode(200);
	
	}
	



	
	

}
